(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1149:function(t,n){},1150:function(t,n){},1151:function(t,n){},1152:function(t,n,e){t.exports=e.p+"img/0de7336.png"},1153:function(t,n,e){t.exports=e.p+"img/6bb8d84.png"},1154:function(t,n,e){t.exports=e.p+"img/39a352f.png"},1155:function(t,n,e){t.exports=e.p+"img/00b2735.png"},1540:function(t,n,e){"use strict";e.r(n);e(19),e(41);var o,r=e(7),c=e(341);o=e(1148).fabric;var l={name:"Cyberpunk2077",data:function(){return{n:null,src:{logo_en:e(1152),logo_en_2:e(1153),logo_en_shadow:e(1154),logo_cn:e(1155)},style:"logo_en",logo:null,backgroundImage:null,canvas:null}},head:function(){return this.$store.state.currentTool.head},watch:{style:function(){this.n&&this.renderCanvas()}},mounted:function(){this.canvas=new o.Canvas(this.$refs.canvas)},methods:{handleChange:function(t){var n=this,e=t.target.files;if(!e.length)return!1;var o=e[0],c=new FileReader;c.readAsDataURL(o),c.addEventListener("load",Object(r.a)(regeneratorRuntime.mark((function t(){var image;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(image=new Image).onload=function(){n.backgroundImage=image,n.$nextTick(n.renderCanvas)},image.src=c.result;case 3:case"end":return t.stop()}}),t)}))),!1)},renderCanvas:function(){var t=this;this.canvas.clear();var image=this.backgroundImage,n=this.$refs.box.offsetWidth,e=1;image.width>n?(this.canvas.setWidth(n),this.canvas.setHeight(n/image.width*image.height),e=n/image.width):(this.canvas.setWidth(image.width),this.canvas.setHeight(image.height)),this.getLogo().then((function(){var e=image.width/2/t.logo.width;image.width>n&&(e=n/2/t.logo.width);var r=new o.Image(t.logo,{scaleX:e,scaleY:e,left:0,top:0});t.canvas.add(r),r.centerH(),t.canvas.renderAll()}));var r=new o.Image(image,{scaleX:e,scaleY:e,left:0,top:0,selectable:!1});this.canvas.setBackgroundImage(r)},getLogo:function(){var t=this;return new Promise((function(n,e){var image=new Image;image.onload=function(){t.logo=image,n(image)},image.onerror=e,image.src=t.src[t.style]}))},save:function(){if(!this.n)return!1;this.canvas.lowerCanvasEl.toBlob((function(t){Object(c.a)(URL.createObjectURL(t),"Cyberpunk_2077.png")}))}}},d=e(2),component=Object(d.a)(l,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"cyberpunk2077"},[e("nya-container",{attrs:{title:"Cyberpunk 2077 图片制作"}},[e("div",{staticClass:"inputbtn"},[e("nya-input",{attrs:{type:"file",accept:"image/*",label:"请选择要制作的图片",placeholder:"点击这里上传文件"},on:{change:t.handleChange},model:{value:t.n,callback:function(n){t.n=n},expression:"n"}}),t._v(" "),e("button",{staticClass:"nya-btn",attrs:{type:"button"},on:{click:t.save}},[t._v("\n                保存\n            ")])],1),t._v(" "),e("div",{staticClass:"nya-subtitle mt-15"},[t._v("\n            选择 Logo 样式\n        ")]),t._v(" "),e("div",{staticClass:"radio-group"},[e("nya-radio-group",{model:{value:t.style,callback:function(n){t.style=n},expression:"style"}},[e("nya-radio",{staticClass:"mr-15",attrs:{value:"logo_en",label:"英文"}}),t._v(" "),e("nya-radio",{staticClass:"mr-15",attrs:{value:"logo_en_2",label:"英文2"}}),t._v(" "),e("nya-radio",{staticClass:"mr-15",attrs:{value:"logo_en_shadow",label:"英文带阴影"}}),t._v(" "),e("nya-radio",{staticClass:"mr-15",attrs:{value:"logo_cn",label:"中文"}})],1)],1)]),t._v(" "),e("nya-container",{directives:[{name:"show",rawName:"v-show",value:t.n,expression:"n"}],attrs:{title:"预览"}},[e("div",{ref:"box",staticClass:"box"},[e("canvas",{ref:"canvas"})])])],1)}),[],!1,null,null,null);n.default=component.exports},341:function(t,n,e){"use strict";n.a=function(t,n){var a=document.createElement("a");a.href=t,a.download=n,a.click()}}}]);